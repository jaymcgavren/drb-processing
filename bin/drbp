require File.expand_path(File.join(File.dirname(__FILE__), '..', 'lib', 'drb-processing', 'client'))
require 'logger'

class Sketch < Processing::App
  def setup
    $client = DRbProcessing::Client.new(self)
    $client.logger = Logger.new(STDOUT)
    $client.connect ARGV[0]
  end
  def draw
  end
  def key_pressed(key)
    $client.disconnect if key.key_code == 27 #Escape
  end
end

sketch = Sketch.new(:width => 640, :height => 480, :title => '', :full_screen => false)

# def disconnect
#   $client.disconnect
# end
# 
# trap("INT") do
#   disconnect
#   sketch.stop
# end
# 
# disconnect
